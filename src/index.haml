%html
    %head
        %meta{ :charset => 'utf8' }
        %title Asterism

        :sass
            $base-hue: 224

            $white: hsl($base-hue, 10, 98)

            $lightest: hsl($base-hue, 14, 92)
            $light:    hsl($base-hue, 20, 88)
            $mid:      hsl($base-hue, 40, 70)
            $darker:   hsl($base-hue, 48, 50)
            $black:    hsl($base-hue, 80,  8)

            *
                margin: 0
                padding: 0

            $base: 1.1250rem

            body
                color: $black
                background-color: $lightest

                font-size: $base
                line-height: 2 * $base

                margin: auto

                display: -webkit-flex
                display: flex

                -webkit-flex-flow: row
                flex-flow: row

                -webkit-justify-content: center
                justify-content: center

                -webkit-align-content: center
                align-content: center

                -webkit-align-items: flex-start
                align-items: flex-start

            #container
                -webkit-order: 1
                order: 1

                -webkit-flex: 1 1 auto
                flex: 1 1 auto

            #navigation
                -webkit-order: 0
                order: 0

                -webkit-flex: 0 0 auto
                flex: 0 0 auto

                li
                    list-style: none
                    font-size: 0.9 * $base
                    line-height: 1.4 * $base

            article, nav
                margin: 2 * $base
                padding: 1.2 * $base

                background-color: $white

                border-radius: 2px

            article
                margin-left: 0

                max-width: 40 * $base

                section
                    margin-top: 3 * $base

                h3 + section
                    margin-top: 0 * $base !important

            nav
                width: 8 * $base

            h1
                font-size: 3.5 * $base
                line-height: 4 * $base
                margin-bottom: 2 * $base

            h2
                font-size: 1.8 * $base
                line-height: 2 * $base
                margin-top: 1 * $base
                margin-bottom: 1 * $base

            h3
                font-size: 1.3 * $base
                line-height: 2 * $base
                margin-top: 0 * $base
                margin-bottom: 1 * $base

            h4
                font-size: 1 * $base
                margin-top: 0
                margin-bottom: 0

            a, a:visited
                color: $darker

            p, ul, pre
                margin-top: 0
                margin-bottom: 1 * $base

                &:last-child
                    margin-bottom: 0

            small
                font-size: 0.9 * $base

            h1, h2, h3, h4
                font-family: "Avenir", "HelveticaNeue-Regular", sans-serif
                font-weight: 500

            p, li
                font-family: "myriad-pro", sans-serif

            p
                code
                    background-color: $light
                    border-radius: 3px
                    padding: 4px

            pre, code
                font-family: "droid-sans-mono", "Menlo", monospaced

                font-size: 0.9 * $base
                line-height: 1.4 * $base

            pre
                background-color: $light

                padding: $base
                margin: $base -1.2 * $base

                overflow-x: scroll

                &.signature
                    $border-width: 0.25

                    border-left: $border-width * $base solid $darker
                    padding-left: (1.2 - $border-width) * $base

            li.argument
                list-style: none
                padding-left: 0.5 * $base

            li.argument .argument-name
                display: block
                margin-left: -0.5 * $base

            code.argument-name
                font-family: "myriad-pro", sans-serif
                font-style: italic
                font-size: $base

                background: none
                padding: 0

        %style
            = Pygments.css(:style => "default")

        %script{src: "//use.typekit.net/qse8qcf.js", type: "text/javascript"}
        %script{type: "text/javascript"}
            try{Typekit.load();}catch(e){}

    %body
        #container
            %article#about
                %h1 Asterism
                %h2 A simple functional toolbelt for Objective-C

                %p
                    Asterism is a yet another functional toolbelt for
                    Objective-C. It tries to be typesafe and elegant.

                %p
                    Using common higher-order functions such as
                    <code>map</code>, <code>reduce</code> and
                    <code>filter</code>, Asterism allows you to manipulate
                    Foundation's data structures with ease.

                %p
                    It makes use of overloaded C-Functions to keep its interface
                    simple while maintaining compile-time safety.
                    For instance, <code>ASTEach</code> takes different blocks
                    depending on the data structure it operates on:

                %pre
                    - example = """
                    -ASTEach([ @\"a\", @\"b\", @\"c\" ], ^(NSNumber *letter) {
                    -    NSLog(@\"%@\", letter);
                    -});
                    -
                    -ASTEach([ @\"a\", @\"b\", @\"c\" ], ^(NSNumber *letter, NSUInteger index) {
                    -    NSLog(@\"%u: %@\", index, letter);
                    -});
                    -
                    -ASTEach(@{ @\"foo\": @\"bar\" }, ^(NSString *key, NSString *value) {
                    -    NSLog(@\"%@: %@\", key, value);
                    -});
                    -"""
                    %code= Pygments.highlight(example, :options => {:lexer => 'objc', :nowrap => true} )

                %h3
                    How does Asterism compare to
                    <a href="https://github.com/zwaldowski/BlocksKit">BlocksKit</a> or
                    <a href="https://github.com/supermarin/ObjectiveSugar">ObjectiveSugar</a>?

                %p
                    BlocksKit adds additional block-support to a wide range of
                    UIKit classes, whereas Asterism's primary focus is providing
                    higher-order functions to transform the most common
                    Foundation data structures.

                %p
                    Objective-Sugar use a more Ruby-inspired syntax, Asterism is
                    currently exclusively using overloaded C-Functions.

                %p
                    Since both BlocksKit and Objective-Sugar use categories,
                    they can't create methods that operate on protocols, such as
                    <code>NSFastEnumeration</code>.

                %p
                    That being said, both are well tested and written by smart
                    people. If Asterism should not be your thing, do check them
                    out.

                %h3{ :id => 'install-guide' } How to install Asterism

                %p
                    The recommended way to install Asterism is using the
                    excellent CocoaPods:

                %pre
                    - guide = "pod 'Asterism', '1.0.0-RC3'"
                    %code= Pygments.highlight(guide, :options => {:lexer => 'ruby', :nowrap => true} )

                %p
                    Alternatively, you can
                    <a href="https://github.com/robb/Asterism">find the code on GitHub</a>.<br>
                    Asterism was written by <a href="http://robb.is">Robert
                    Böhnke</a> and is <a href="http://opensource.org/licenses/MIT">MIT licensed</a>.

            - docs.each do |methods|
                - groups = methods.group_by{|m| m[:name]}
                - groups.each_pair do |(name, methods)|
                    %article{ :id => "method-#{name}" }
                        %h3= name

                        - methods.each do |method|
                            %section{ :id => "#{method[:signature]}" }

                                %pre{ :class => 'signature' }
                                    - signature = method[:signature].sub("ASTERISM_OVERLOADABLE ", "")
                                    %code= Pygments.highlight(signature, :options => {:lexer => 'objc', :nowrap => true} )

                                %p
                                    :markdown
                                        #{method[:tomdoc].description}

                                %ul
                                    - method[:tomdoc].arguments.each do |arg|
                                        %li.argument
                                            %code.argument-name= arg.name
                                            :markdown
                                                #{arg.description}

                                - unless method[:tomdoc].examples.empty?
                                    %h4 Examples
                                    %pre{ :class => 'example' }
                                        - examples = method[:tomdoc].examples.join("\n\n")
                                        %code= Pygments.highlight(examples, :options => {:lexer => 'objc', :nowrap => true} )

                                - method[:tomdoc].returns.each do |ret|
                                    %p
                                        :markdown
                                            #{ret}

        %nav#navigation
            %h4 Asterism

            %ul
                %li
                    %a{ :href => "\#about" } About Asterism
                %li
                    %a{ :href => "\#install-guide" } How to install

            %h4 Methods
            %ul
                - docs.each do |methods|
                    - groups = methods.group_by{|m| m[:name]}
                    - groups.each_pair do |(name, methods)|
                        %li
                            %a{ :href => "\#method-#{name}" }
                                #{ name }

            %p
                %small Made with &#x1F496; by <a href="http://robb.is">Robert Böhnke</a>
